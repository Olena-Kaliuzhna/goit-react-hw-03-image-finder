{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","components/App.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.js","services/ImageApi.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleQueryChange","event","setState","target","value","toLowerCase","handleQuerySubmit","preventDefault","trim","toast","error","props","onSubmit","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","API_KEY","BASE_URL","fetchImages","page","a","url","fetch","then","response","ok","json","Promise","reject","Error","imageApi","propTypes","PropTypes","string","isRequired","number","ImageGalleryItem","tags","src","dataLargeImg","openModal","onClick","alt","data-largeimg","GalleryItemImage","ImageGallery","images","map","id","webformatURL","largeImageURL","Button","LoaderSpin","loader","color","height","modalRoot","document","querySelector","Modal","loading","handleOnClose","e","code","onClose","handleBackdropClick","currentTarget","handleImageLoaded","prevState","window","addEventListener","createPortal","overlay","modal","onLoad","modalImg","App","isLoading","modalImage","onSearch","fetchImg","hits","length","catch","finally","onLoadMore","scrolling","setTimeout","scrollBy","top","documentElement","clientHeight","behavior","onOpenModal","dataset","largeimg","closeModal","prevProps","Loader","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.06b1bd99.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1guCk\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__1DDrN\",\"GalleryItemImage\":\"ImageGallery_GalleryItemImage__3Qi9Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2PXm6\",\"modal\":\"Modal_modal__RIzPU\",\"modalImg\":\"Modal_modalImg__1RJNM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2sF1j\",\"error\":\"App_error__23xys\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__13h28\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3y0Q_\"};","import React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport s from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: \"\",\r\n  };\r\n  handleQueryChange = (event) => {\r\n    this.setState({ query: event.target.value.toLowerCase() });\r\n  };\r\n\r\n  handleQuerySubmit = (event) => {\r\n    event.preventDefault();\r\n    const { query } = this.state;\r\n\r\n    if (query.trim() === \"\") {\r\n      return toast.error(\"введите запрос\");\r\n    }\r\n\r\n    this.props.onSubmit(query);\r\n\r\n    this.setState({ query: \"\" });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleQuerySubmit}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleQueryChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\nexport default Searchbar;\r\n","import PropTypes from \"prop-types\";\r\n\r\nconst API_KEY = \"19148486-756287a79d9450e591a6e8776\";\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\n\r\nasync function fetchImages(query, page) {\r\n  const url = `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n\r\n  return fetch(url).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(new Error(`По запросу ${query} ничего не найдено`));\r\n  });\r\n}\r\n\r\nconst imageApi = { fetchImages };\r\nfetchImages.propTypes = {\r\n  query: PropTypes.string.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n};\r\nexport default imageApi;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./ImageGallery.module.css\";\r\n\r\nfunction ImageGalleryItem({ tags, src, dataLargeImg, openModal }) {\r\n  return (\r\n    <li className={s.ImageGalleryItem} onClick={openModal}>\r\n      <img\r\n        src={src}\r\n        alt={tags}\r\n        data-largeimg={dataLargeImg}\r\n        className={s.GalleryItemImage}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  tags: PropTypes.string.isRequired,\r\n  dataLargeImg: PropTypes.string.isRequired,\r\n  openModal: PropTypes.func,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport ImageGalleryItem from \"./ImageGalleryItem\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./ImageGallery.module.css\";\r\n\r\nfunction ImageGallery({ images, openModal }) {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {images.map(({ id, tags, webformatURL, largeImageURL }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            tags={tags}\r\n            src={webformatURL}\r\n            dataLargeImg={largeImageURL}\r\n            openModal={openModal}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.arrayOf(PropTypes.shape).isRequired,\r\n  openModal: PropTypes.func,\r\n};\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport s from \"./Button.module.css\";\r\n\r\nconst Button = ({ fetchImages }) => {\r\n  return (\r\n    <button type=\"button\" onClick={fetchImages} className={s.Button}>\r\n      Load more...\r\n    </button>\r\n  );\r\n};\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n};\r\nexport default Button;\r\n","import { Component } from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport s from \"./Loader.module.css\";\r\n\r\nclass LoaderSpin extends Component {\r\n  state = {};\r\n  render() {\r\n    return (\r\n      <div className={s.loader}>\r\n        <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={60} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoaderSpin;\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport s from \"./Modal.module.css\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  state = {\r\n    loading: false,\r\n  };\r\n  toggleLoadind() {\r\n    this.setState((prevState) => {\r\n      return { loading: !prevState.loading };\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n    window.addEventListener(\"keydown\", this.handleOnClose);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.addEventListener(\"keydown\", this.handleOnClose);\r\n  }\r\n\r\n  handleOnClose = (e) => {\r\n    if (e.code !== \"Escape\") {\r\n      return;\r\n    }\r\n\r\n    this.props.onClose();\r\n  };\r\n  handleBackdropClick = (event) => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleImageLoaded = () => {\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n    return createPortal(\r\n      <div onClick={this.handleBackdropClick} className={s.overlay}>\r\n        <div className={s.modal} onLoad={this.handleImageLoaded}>\r\n          <img className={s.modalImg} src={src} alt={alt}></img>\r\n        </div>\r\n        {this.state.loading && (\r\n          <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={350} />\r\n        )}\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Searchbar from \"./Searchbar/Searchbar\";\nimport imageApi from \"../services/ImageApi\";\nimport ImageGalerry from \"./ImageGallery/ImageGallery\";\nimport Button from \"./Button/Button\";\nimport LoaderSpin from \"./Loader/Loader\";\nimport Modal from \"./Modal/Modal\";\nimport s from \"./App.module.css\";\n\nclass App extends Component {\n  state = {\n    query: null,\n    images: [],\n    page: 1,\n    isLoading: false,\n    openModal: false,\n    modalImage: null,\n    alt: null,\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      prevState.query !== this.state.query ||\n      prevState.page !== this.state.page\n    ) {\n      this.fetchImg();\n    }\n  }\n\n  onSearch = (query) => {\n    this.setState({ query, images: [], page: 1, error: null });\n  };\n\n  fetchImg = async () => {\n    const { query, page } = this.state;\n\n    this.setState({ isLoading: true });\n\n    imageApi\n      .fetchImages(query, page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          return this.setState({\n            error: `Не удалось найти картинку по запросу ${query}`,\n          });\n        }\n        this.setState(({ images, page }) => ({\n          images: [...images, ...hits],\n          page: page,\n        }));\n      })\n      .catch((error) => this.setState({ error: \"Побробуйте снова\" }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onLoadMore = () => {\n    this.setState((prevState) => ({ page: prevState.page + 1 }));\n    this.scrolling();\n  };\n\n  scrolling = () => {\n    setTimeout(() => {\n      window.scrollBy({\n        top: document.documentElement.clientHeight - 150,\n        behavior: \"smooth\",\n      });\n    }, 1000);\n  };\n\n  onOpenModal = (e) => {\n    e.preventDefault();\n    this.setState({\n      openModal: true,\n      modalImage: e.target.dataset.largeimg,\n      alt: e.target.alt,\n    });\n  };\n\n  closeModal = () => {\n    this.setState({ openModal: false });\n  };\n\n  render() {\n    const { images, isLoading, openModal, modalImage, alt, error } = this.state;\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.onSearch} />\n        {isLoading && <LoaderSpin />}\n        {images.length > 0 && !error && (\n          <>\n            <ImageGalerry openModal={this.onOpenModal} images={images} />\n            <Button fetchImages={this.onLoadMore} />\n          </>\n        )}\n\n        {openModal && (\n          <Modal onClose={this.closeModal} src={modalImage} alt={alt}></Modal>\n        )}\n        {error && <p className={s.error}>{error}</p>}\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"./index.module.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__Hqra-\",\"SearchForm\":\"Searchbar_SearchForm__2oxBr\",\"SearchFormButton\":\"Searchbar_SearchFormButton__lthn4\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1cy9j\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2A7C4\"};"],"sourceRoot":""}